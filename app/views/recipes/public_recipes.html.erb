<h1>Public Recipes ü•ôüçîüçü</h1>

<ul class="list-group">
  <% @recipes.each do |recipe| %>
    <li class="list-group-item list-group-item-action container">
      <div class='row align-items-center'>
        <div class='col'>
          <%= link_to recipe_path(recipe), class:'text-decoration-none' do %>
            <h2><%= recipe.name %></h2>
            <p>by <%= recipe.user.name %></p>
          <% end %>
        </div>
        <div class='col container'>
          <div class='row'>
            <div class='col'>
              <p>Total food items: <%= recipe.recipe_foods.length %></p>
              <p>Total price: <%= recipe.recipe_foods.sum { |recipe_food| recipe_food.food.price * recipe_food.quantity} %></p>
            </div>
            <div class='col d-flex justify-content-end align-items-center'>
              <% if can? :destroy, recipe %>
                <%= form_with model: recipe, url: recipe_path(recipe), method: :delete do |f| %>
                  <%= f.submit "Remove", class: 'btn btn-danger' %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </li>
  <% end %>
</ul>
